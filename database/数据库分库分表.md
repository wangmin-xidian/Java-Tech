*************************************
**分库分表&读写分离**    2018/12/04
***************************************
 1. **为何要分库分表和读写分离** ： 
    - 海量的数据的存储和访问称为系统的设计瓶颈
    - 日益增长的业务数据，对数据库造成了很大的负载
    - 对系统的稳定性和扩展性提出很高的要求      
   **分库分表和读写分离可以有效地减小单台数据库的压力**
   
2. **何为分区，分表，分库**
    - **分区**：将一张表的数据分成N个区块，在逻辑上看最终是一张表，但底层是由N个物理区块组成的，分区实现比较简单，MySQL，oracle都很容易支持。
    - **分表**：将一张表按一定的规则分解成N个具有独立存储空间的实体表。系统读写时需要根据定义好的规则得到对应的字表明。
    
3. **何时考虑使用分区**：   
    一张表的查询速度已经慢到影响使用时
    - sql经过优化
    - 数据量大
    - 表中的数据是分段的
    - 对数据的操作往往只设计一部分数据，而不是所有的数据        
  **分区解决的问题是提升查询效率**
  
4. **何时考虑分表**：  
    - 一张表的查询速度已经慢到影响使用时
    - sql经过优化
    - 数据量大
    - 当频繁插入或者联合查询时，速度变慢
    
    - **分表解决的问题** 
      - 查询一次的时间短了
      - 数据分布在不同的文件，磁盘I/O性能提高
      - 读写锁影响的数据量变小
      - 插入数据库需要重新建立索引的数据减少
    
5. **常见分表、分库常用策略**
    - 平均进行分配hash(object)%N，适用于简单架构；
    - 按照权重进行分配且均匀轮询；
    - 按照业务进行分配；
    - 按照一致性hash算法进行分配（适用于集群架构，在集群中节点的添加和删除不会造成数据丢失，方便数据迁移）
    
    
**Reference**    
    - [mysql分表和表分区详解](https://www.2cto.com/database/201503/380348.html)  
    - [数据库分区、分表、分库，读写分离](https://blog.csdn.net/liangz/article/details/79352870)     
    - [［MySQL］MySQL分区与传统的分库分表](https://www.jianshu.com/p/89311703b320)    
    - [阿里P8架构师谈：数据库分库分表、读写分离的原理实现，使用场景](http://youzhixueyuan.com/the-principle-of-separating-tables-reading-and-writing-and-using-scenarios.html)  

