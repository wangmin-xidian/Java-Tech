## Linux命令总结    2019/04/19 
-------------------------------------------
## 目录
  1. [Linux系统启动过程](#Linux系统启动过程)
  2. [处理目录](#处理目录)
  3. [Linux-vi/vim](#Linux-vi/vim)
  4. [更改文件属性](#更改文件属性)
  5. [解压文件](#解压文件)
  6. [Linux-yum命令](#Linux-yum命令)
  7. [热键](#热键)
  8. [Linux关机](#Linux关机)
---------------------------------------------
#### 1. Linux系统启动过程
内核的引导 -> 运行init -> 系统初始化 -> 建立终端 -> 用户登录系统
- 内核引导
    - 当计算机打开电源后，首先是BIOS开机自检，安装BIOS中设置的启动设备（硬盘）来启动。   
    - 操作系统接管硬件以后，首先读入/boot目录下的内核文件        
- 运行init
    - init进程是系统所有进程的起点，没有这个进程，系统中任何进程都不会启动。
    - init程序首先是需要读取配置文件/etc/inittab
    - init进程的一大任务，是去运行开机启动的程序，不同的场合需要启动不同的程序。
		
    - Linux允许为不同的场合，分配不同的开机启动程序，这叫做“运行级别”    
      - (1) 运行级别0 : 系统停机状态，系统默认运行级别不能设为0，否则不能正常启动   
      - (2) 运行级别1 ： 单用户工作状态，root权限，用于系统维护，禁止远程登录    
      - (3) 运行级别2 ： 多用户状态，没有NFC   
      - (4) 运行级别3 ： 完成的多用户状态，有NFC，登录后进入控制台命令行模式    
      - (5) 运行级别4 ： 系统未使用，保留   
      - (6) 运行级别5 ： X11控制台，登录后进入图形GUI模式   
      - (7) 运行级别6 ： 系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动   
	
- 系统初始化
  - 根据init的配置文件，调用执行/etc/rc.d/rc.sysinit， rc.sysinit是一个bash shell 的脚本，主要完成系统初始化工作
  - 它是每个运行级别都要首先运行的重要脚本，主要工作有：激活交换分区，检查磁盘，加载硬件模块以及需要优先执行任务		
  - 真正的rc启动脚本实际上都是放在/etc/rc.d/init.d/目录下
		
- 建立终端
  - rc执行完毕后，返回init。这时基本系统环境已经设置好了，各种守护进程也已经启动了。
  - init接下来会打开6个终端，以便用户登录系统。
		
- 用户登录系统
  - 一般来说，用户登录的方式有三种：
    - (1) 命令行登录
    - (2) ssh登录
    - (3) 图形界面登录
		
- 图形模式与文字模式的切换方式
  - Ctrl + Alt + F1 ~ F6 可切换六个命令窗口
  - 进入命令窗口界面后再返回图形界面只要按下 Ctrl + Alt + F7 即可切换回来
  - 若使用的VMware虚拟机，命令窗口切换命令为 Alt + Space + F1 ~ F6 
  - 若在图形界面下请按 Alt + Shift + Ctrl + F1 ~ F6切换至命令窗口

#### 2. 处理目录
- `pwd` 查看当前路径
  - `pwd -P` ： 显示出确实的路径，而非使用连结路径
- `ls` 列出当前文件夹中所有文件 
  - `ls -a` ：全部的文件，连同隐藏档一起列出了
  - `ls -d` ：仅列出目录本身，而不是列出目录内的文件数据
  - `ls -l` ：长数据串列出，包含文件的属性与权限等数据
- `mkdir`: 创建一个新的目录
  - `mkdir dir`
  - `mkdir -m 711 file` 配置文件的权限
  - `mkdir -p` 递归创建多级目录  mkdir -p test1/test2/test3
- `rmdir`: 删除一个空的目录
  - `rmdir dir`
  - `rmdir -p` 连同上一级空的目录页一起删除
- `cp`: 复制文件或目录
  - `cp -a/d/f/i/l/p/r/s/u  source  destination`
- `rm`: 移除文件或目录
  - `rm -f/i/m file/dir`
- `mv`: 移动文件与目录，或修改名称
  - `mv -f/i/u`  
- `cd` 切换到指定目录 
- `cd -` 回到上一次所在目录  
- `cd ~` 回到主目录
- `cd`   回到主目录
- `cd ..` 回到上一级目录      

#### 3. Linux-vi/vim 
- vi/vim的使用三种模式：命令模式，插入模式，底线命令模式
  - 命令模式
    - 用户刚刚启动vi/vim，便进入了命令模式,常用的命令：
    - `i` 切换到插入模式，以输入字符
    - `x` 删除当前光标所在处的字符
    - `:` 切换到底线命令模式，以在底线一行输入命令		
  - 输入模式
    - 在命令模式下按`i`进入到输入模式
    - 字符按键以及Shift组合，输入字符
    - ENTER， 回车键，换行
    - BACK SPACE， 退格键，删除光标前一个字符
    - 方向键，在文本中移动光标
    - HOME/END，移动光标到首行/行尾
    - Page Up/ Page Down, 上下翻页
    - Insert 切换光标为输入/替换模式，光标将变为竖线/下划线
    - ESC 退出输入模式，切换到命名模式
  - 底线命令模式
    - 在命名模式下按`:` 进入底线命令模式
    - 底线命令模式可以输入单个或多个字符的命令，可用的命令非常多
    - 在底线命名模式中，基本的命名有：
      - `q` 退出程序
      - `w` 保存文件
- `vi filename` 打开或新建文件 
- `vi + filename`, 打开文件，并光标显示在最后一行
- `vi +n filename`, 打开文件，光标显示到第n行
- `vi +/pattern filename`, 打开文件，光标显示到第一个匹配pattern
- `tail file` 输出指定文件的最后十行  
- `tail -n file` 输出指定文件的最后n行  
- `tail -f file` 动态跟踪file的增长情况，前提是file必须要存在  
- `tail -F file` 动态跟踪file的增长情况，文件可以不存在，也可log4j根据时间产生的log    
- `ZZ` 退出编辑文件
- `:w` 保存但不退出，还可以给文件重命名（:w newfile）
- `:q` 提示用户保存文件，不会直接退出
- `:q!` 放弃所有操作，直接退出
- `:wq` 先保存再退出

#### 4. 解压文件
- `unzip file` 解压文件
- `unzip -d dir file` 将文件解压到指定目录；
- `unzip -n file` 解压时不覆盖；
- `unzip -l file` 解压时，查看解压内容；
- `unzip -v file` 解压，显示解压内容，并包括解压率
- `unzip -t file` 建议解压文件是否解压出错 

#### 5. 更改文件属性
- 文件类型描述 
  - `d`: 目录， 
  - `-`: 文件， 
  - `l`: 链接文档， 
  - `b`: 装置文件里面的可供储存的接口设备， 
  - `c`: 串行端口设备
- `chgrp` : 更改文件属组
- `chown` : 更改文件属主，也可以同时更改文件属组
- `chmod` : 更改文件9个属性
  - Linux文件属性有两种设置方法，一种是数字，一种是符号
  - Linux文件的基本权限是9个，分别是owner/group/ohters三种身份各自的r/w/x权限
  - 使用数字来代表各个权限，各权限的分数对照表如下：r:4, w:2, x:1 
  - rwx=4+2+1=7, r-x=4+1=5 ---=0+0+0=0
  - `chomod 777 file`
  - 符号类型改变文件权限 
    - `chmod  u/g/o/a  +/-/= r/w/x  file` 
    - u -- user, g -- group, 0 -- others, + 加入权限，- 除去权限， == 设定权限
    
#### 6. Linux-yum命令
- yum(Yellow dog Updater,Modified)是一个Fedora和RedHat以及SUSE中的Shell前端软件包管理器
- 基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可用自动处理依赖性关系，并且一次安装所有依赖的软件包
- yum 提供了查找，安装，删除某一个、一组甚至全部软件包的命令
- yum常用命令
  - `yum check-update` : 列出所有可更新的软件清单命令
  - `yum update` : 更新所有软件命令
  - `yum install <package_name>` : 仅安装指定的软件命令
  - `yum update <package_name>` : 仅更新指定的软件命令
  - `yum list` : 列出所有可安装的软件清单命令
  - `yum remove <package_name>` : 删除软件包命令 
  - `yum search <keyword>` : 查找软件包命令
  - `yum clean packages` : 清除缓存目录下的软件包 
  - `yum clean headers` :  清除缓存目录下的headers
  - `yum clean oldheaders` : 清除缓存目录下的旧的headers
  - `yum clean, yum clean all` : 清除缓存目录下的软件包及旧的headers

#### 7. 热键
- `Tab` 自动命令补全
- `Ctrl + C` 让当前程序停掉
- `Ctrl + D` 键盘输入结束
- `clear` 清屏；
- `man -k keyword` 根据关键字，查找命令    
- `q/man -f man` 退出

#### 8. Linux关机
- 正确的关机流程为： sync > shutdown > reboot > halt
- `sync` : 将数据由内存同步到硬盘中
- `shutdown` ： 关机指令
- `reboot` ： 重启，相当于 shutdown -r now
- `halt` ： 关闭系统，等同于shutdown -h now 和 poweroff 












