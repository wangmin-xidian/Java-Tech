*************************************
	2018/12/21
*************************************
MES是智能制造系统的简称。      
MES是在车间中用以管理和优化从订单下单到产品完工的整个生产过程的硬件和软件的集合。它控制和利用准确的生产信息，对车间和生产活动中的实时事件做出快速响应，同时向企业决策支持过程提供相关生产活动的重要信息。     
一个完备的MES系统能够帮助厂区从机械化到自动化再到智能化，利用物联网技术和设备监控技术加强信息管理服务，提高生产过程可控性、减少生产线人工干预，集成智能手段和智能设备等新兴技术于一体，构建高效、节能、绿色、环境的智能工厂。

L0-L4的架构，重点描述MES的层级架构    
设备交互层，ERP、CRM 交互层， MES的架构可从生产过程来阐述，左侧是产前的PLM，排程等基础信息交互，右侧是产品出库销售的交互。
产前（仓库管理，物料管理，工单管理，机种管理），产中是设备管理，产线管理，生产管理，途程管理，监控和维修管理，产后是成品管理，数据分析，OEE，SPC。
我这边负责过的项目是产前的基础资料模块，机种管理，BOM管理，阐述下DG5厂的使用物料的流程，到厂区调研，讨论需求，做design，指定iteration plan， 主要工作是解析导入数据，并使用平台+event事件，将基础资讯创建完成。同时是开发的接口人，与厂区，UI的同事沟通，协调讨论需求，定制页面等。
然后重点阐述仓库管理架构， 首先是基础资讯的管理（仓库，架位，移动料车，物料），然后阐述业务流程，并根据业务流程将模块划分为来料检验，入库，上架位，出库，拣货，退库，库存管理，库存盘点。 同时会调用ERP交互接口进行扣账，若厂区有智能AGV的话，那会做一些接口供使用。
接着是产中的途程管理，产中核心模块，是关联机种和生产的重要依据，同时也是做WIP的核心基础。途程是定义一个产品生产所需的设备、阶段、工艺。

这几个模块是我来负责主导的，所以在做Design的时候，会综合考虑很多因素，主要体现有在系统架构和代码层面上：
系统架构:
 1. 深入了解业务领域知识，对业务进行抽象并拆分成模块化，保证团队可以并行开发，节省开发时间；
 2. 基于对具体业务的考虑，在数据库选型上会结合使用关系型数据库Postgres和非关系型数据库MongoDB，一方面保证了语义明确结构固定的结构化数据能够很好地利 用关系型数据库的关系特定和事务等高级功能，另一方面也让语义不明确，可扩展的数据存储在非关系型数据库中，延展了扩展性。
 3. 基于对业务模块的数据量不同的考量，使用分库分表，保证数据能够模块化的同时还为未来可能的功能业务保留了扩展性；
 4. 模块化开发的过程中，使用消息中间件RabbitMQ来进行通信，很大程度上实现了模块的解耦且利用消息中间件的特性保证了消息的高可用性，一致性。

代码层面：
 1. 一方面是结合公司内部规范和阿里的java开发手册，规范代码结构和书写规范等，提供代码可读性；
 2. SQL的性能上，使用explain分析监控慢SQL，并对SQL进行针对性的优化，比如说建立适当的索引，使用缓存等；
 3. SQL的安全方面，使用预编译等形式预防SQL注入等；
 4. 使用Log4j框架，根据业务功能、时间等不同形式监控系统，同时跟踪模块间调用信息，便于定位问题。

阐述方案如何落地：
  结合ISA95设计MES系统-厂区实地调研-需求讨论-功能&UI 复用/定制化Design确立后，项目正式开始进行开发
    
细化场景： 
  发料过程，   数据表的design，模块的划分，与其他模块的交互 PBL、AGV 
  
 


**************************************
	2018/12/17
**************************************


现在是互联网时代，许多新兴的产业蓬勃发展，能快速发展无疑都是伴随着新技术的。中国是世界的制造中心，很大的因素是廉价的劳动力。制造业是占工业中最大比例，但26%的产值与德国40%等制造强国相比，存在很大差距。其中技术和人力是两大主因。

中国是世界上唯一一个制造业种类齐全的国家，制造业各式各样，但中国制造还没有被世界承认，很大的原因在于传统的制造业并没有那么的自动化智能化，不管是生产模式、管理模式还是产品质量监控各个环节上都有很多不足之处。国内许多制造业企业因为技术不先进、人力成本又提升导致了破产倒闭。

MES是在车间中用以管理和优化从订单下单到产品完工的整个生产过程的硬件和软件的集合。它控制和利用准确的生产信息，对车间和生产活动中的实时事件做出快速响应，同时向企业决策支持过程提供相关生产活动的重要信息。
一个完备的MES系统能够帮助厂区从机械化到自动化再到智能化，利用物联网技术和设备监控技术加强信息管理服务，提高生产过程可控性、减少生产线人工干预，集成智能手段和智能设备等新兴技术于一体，构建高效、节能、绿色、环境的智能工厂。

工业4.0，中国制造2025等的提出都体现了当下的制造业处在危机之中，同样也是一个很好的发展机遇。在当下时间点，如何顺势而为是制造业软件系统要考虑的重要课题

我们公司智能制造专家团队对众多制造工厂的实体走访和测评了解到厂区一些共同现象：
1. 厂区没有合理规范的规划生产设备和工艺，导致产能过剩。人力过剩；
2. 自动化水平不高，生产设备老旧，过多的人工操作不可避免地带来更多的人为失误；
3. 生产过程不清晰，生产信息没有可视化，不能很好及时发现和追溯产品失败的原因；
4. 使用的软件过多，各个系统间没有通信，都是一个个独立的信息孤岛，导致系统间很难互通互联，实现信息共享；
5. 由于客户订单的随时变更，引起产线生产出现很多的插单现象，整个生产计划混乱，难以管理；
6. 没有很好的上下游系统，无法给供应商和客户更好的信息服务。

那我们的MES系统致力于解决制造行业的痛点，提供符合厂区的解决方案，开源节流帮助工厂逐步实现自动化、数字化、智能化。比如：导入规范的生产工艺和途程信息，规范并指导生产，并记录生产中各阶段的生产状况，提供产品的信息追溯功能；比如：对厂区所有物料资源进行标签化管理，使用手持设备进行资源的录入和借出，减少人为错误；比如：借助智能设备AGV并构建立体动态架位，实现仓库的智能存储、智能派送；比如：收集生产过程中设备数据，统计分析，提供OEE和SPC功能进行产能分析，帮助产区优化生产，最大化利用设备。整体上帮助厂区实现产品生产过程的全面追溯，建立全面的质量管控体系，实现车间信息的可视化。降低成本，提升质量，避免产能过剩。






**********************************
	项目介绍  2018/12/13
************************************
项目概念，意义，自己做了什么

MES是智能下商店推出自己的线上APP，战略上全面覆盖，留住且吸引更多顾客。传统的制造业也面临这类问题，亟待与科技进行结合，实现实体制造业的进化。中国是世界上唯一一个制造业种类齐全的国家，制造业各式各样，但中国制造并没有被世界承认。很大原因在于传统的制造业并没有那么的自动化，智能制造系统的简称，首先我来讲一下MES系统的目前的现状和背景。现在是互联网的时代，是科技的时代。很多新兴的行业顺应而生。那传统行业收到很大的冲击，就比如说电商的出现，带来太多的方面，传统的线下商店超市面临很多的挑战，不跟时代技术结合很容易就被淘汰，因此出现了很多超市或线化，不管是生产模式，管理模式还是产品质量监控各个环节都有很多不足之处。工业4.0，中国制造2025等等这些都体现了当下的制造业处在危机之中，同样也是一个机遇。一个完备的MES系统可以帮助工厂从机械化到自动化再到智能化，利用物联网技术和监控技术加强信息管理服务，提高生产过程可控性、减少生产线人工干预，集智能手段和智能系统等新兴技术于一体，构建高效、节能、绿色、环保、舒适的人性化的智能工厂。MES是车间中用以管理和优化从订单下达到产品完工的整个生产过程的硬件和软件集合，它控制和利用准确的制造信息，对车间生产活动中的实时事件做出快速响应，同时向企业决策支持过程提供相关生产活动的重要信息。

关键技术标准体系：
智能装备，智能工厂，智能服务，工业软件和大数据，工业互联网

产品生产过程的全面追溯，建立全面的质量管控体系，车间生产信息的可视化，

制造商效益：加强研发，提升质量，降低成本，缩短交期
客户受益：定制下单权，过程监控权，质量判决权


场景
	移动互联网+下单订购一个定制化的产品，制造过程按照需要、智能找原料、智能找设备、工装、组装线组合或工厂，在最短的时间交给客户。
	
	
智能切入点
	客户关系管理智能化：客户定制，客户体验，顾客引导
	生产企业：生产智能化，智能化推产，智能化控制，智能化结构反馈，物料智能化，智能仓储工具，智能配送
	供应销售管理智能化：物料需求平准化，信息共享，缺料报警，自动预订，来料信息智能反馈


系统架构 
	L0-L2是硬件设备层，L3是MES，L4是ERP系统
也是按照层级划分
	
底层是设备机台，通过一个通信协议获取产线生产数据.
中间是MES内部系统，模块化来划分功能，4大模块（生产资源，生产能力，生产性能，生产计划）引申出更多具体的模块，静态资源的管理：工单，机种，物料清单，对设备的管理，动态生产的管理，生产管理，途程管理，智能换线管理，全面追溯的WIP管理，质量检测、维修和性能分析的产能管理（OEE，SPC）。同时还会有上下游的供应商和客户的管理。各个模块间紧密配合，共同完成智能制造系统的全面功能。
上层是ERP系统，MES系统会与企业管理的系统进行交互获取排程，机种物料信息以及相关扣账系统，同时根据产线数据的分析，可有效反馈并智能推荐物料采购，生产排程等信息。
		

考虑突出如何将一个落后的系统，逐步微服务模块化升级到现在高效简洁易用的样子，
从架构的层面，一层一层分析，一点点从上到下，从顶层到细节，有条不紊地谈。
从产品架构以及对业务线优化的理论上下功夫。
根据业务场景分库分表，表的设计既满足当前业务需求，又尽量可满足未来可预见的业务规划
代码端，对数据库操作批量操作，对数据一致性要求高的地方，使用事务。
对异常场景，日志监控，预警设置，从多方面晚上一个系统
对执行时间长的数据库操作，监控且针对性优化，
比如有几个数据库操作在监控中发现耗时长，针对性的优化了索引，以及sql的写法。





